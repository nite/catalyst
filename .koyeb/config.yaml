---
# Koyeb App Configuration for Catalyst
# Mobile-first data visualization platform

app:
  name: catalyst
  
services:
  # Main application service (API + Web)
  - name: catalyst-app
    type: web
    
    # Build configuration
    build:
      type: docker
      dockerfile: Dockerfile
      context: .
    
    # Container configuration
    instance:
      type: nano  # Start with smallest instance, can scale up
    
    # Ports configuration
    ports:
      - port: 8000
        protocol: http
    
    # Health check
    health_checks:
      - http:
          port: 8000
          path: /health
          initial_delay_seconds: 30
          timeout_seconds: 5
          period_seconds: 10
    
    # Environment variables
    env:
      - name: PORT
        value: "8000"
      - name: PYTHON_VERSION
        value: "3.12"
      - name: NODE_VERSION
        value: "20"
    
    # Scaling configuration
    scaling:
      min: 1
      max: 1
    
    # Routes - expose the service to the internet
    routes:
      - path: /
        port: 8000
