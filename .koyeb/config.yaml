# Koyeb Configuration for Catalyst
# Deploy both backend and frontend services to Koyeb

services:
  # Backend API Service
  - name: catalyst-backend
    git:
      # Replace with your GitHub repository URL
      repository: github.com/nite/catalyst
      branch: main
      workdir: /backend
    instance:
      type: nano  # Free tier
    ports:
      - port: 8011
        protocol: http
    env:
      - name: PORT
        value: "8011"
      - name: NODE_ENV
        value: production
    docker:
      dockerfile: ./Dockerfile.prod
    regions:
      - fra  # Frankfurt - change based on your user location
    scaling:
      min: 1
      max: 1

  # Frontend Service
  - name: catalyst-frontend
    git:
      # Replace with your GitHub repository URL
      repository: github.com/nite/catalyst
      branch: main
      workdir: /frontend
    instance:
      type: nano  # Free tier
    ports:
      - port: 80
        protocol: http
    env:
      # IMPORTANT: Update this with your actual backend URL after deploying backend
      - name: VITE_API_URL
        value: https://catalyst-backend-yourname.koyeb.app
    docker:
      dockerfile: ./Dockerfile.prod
    regions:
      - fra  # Frankfurt - change based on your user location
    scaling:
      min: 1
      max: 1
